CREATE TABLE users(
    id INT(50) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL,
    password VARCHAR(255) NOT NULL,
    gender ENUM("male", "female", "unknown") DEFAULT "unknown"
);





CREATE TABLE posts(
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    date_posted TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE comments(
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    post_id INT NOT NULL,
    comment VARCHAR(255) NOT NULL,
    date_commented TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (post_id) REFERENCES posts(id)
);

INSERT INTO users(name,email,password, gender) VALUES('Peter', 'test@gmail.com', 'Pp12345', 0);


CREATE TABLE product(
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description VARCHAR(255) NOT NULL,
    price INT(15) NOT NULL,
    quantity INT(20) NOT NULL
);

CREATE TABLE orders(
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    product_name VARCHAR(255) NOT NULL,
    user_id INT NOT NULL,
    quantity INT NOT NULL,
    total_price INT NOT NULL,
    status ENUM("Pending", "Processed") DEFAULT "Pending",
    
    FOREIGN KEY (product_id) REFERENCES product(id),
    FOREIGN KEY (user_id) REFERENCES users(id),

);


INSERT INTO users(name,email,password, gender) VALUES('test', 'test@gmail.com', 'test', 'male');

INSERT INTO product(title, description, price, quantity) VALUES('Phone', 'This is an iphone 17 pro', 1500, 24);

INSERT INTO orders(product_id, user_id, quantity, total_price) VALUES(4, 2, 1, 8000);

ALTER TABLE orders
DROP COLUMN product_name;


ALTER TABLE orders
ADD COLUMN order_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP BEFORE status;
