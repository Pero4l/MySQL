CREATE TABLE users(
    id INT(50) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL,
    password VARCHAR(255) NOT NULL,
    gender ENUM("male", "female", "unknown") DEFAULT "unknown"
);





CREATE TABLE posts(
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    date_posted TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE comments(
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    post_id INT NOT NULL,
    comment VARCHAR(255) NOT NULL,
    date_commented TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (post_id) REFERENCES posts(id)
);

INSERT INTO users(name,email,password, gender) VALUES('Peter', 'test@gmail.com', 'Pp12345', 0);


CREATE TABLE product(
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description VARCHAR(255) NOT NULL,
    price INT(15) NOT NULL,
    quantity INT(20) NOT NULL
);

CREATE TABLE orders(
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    product_name VARCHAR(255) NOT NULL,
    user_id INT NOT NULL,
    quantity INT NOT NULL,
    total_price INT NOT NULL,
    status ENUM("Pending", "Processed") DEFAULT "Pending",
    
    FOREIGN KEY (product_id) REFERENCES product(id),
    FOREIGN KEY (user_id) REFERENCES users(id),

);





INSERT INTO users(name,email,password, gender) VALUES('test', 'test@gmail.com', 'test', 'male');

INSERT INTO product(title, description, price, quantity) VALUES('Phone', 'This is an iphone 17 pro', 1500, 24);

INSERT INTO orders(product_id, user_id, quantity, total_price) VALUES(4, 2, 1, 8000);

ALTER TABLE orders
DROP COLUMN product_name;


ALTER TABLE orders
ADD COLUMN order_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP BEFORE status;





INSERT INTO users(full_name,email,password,role) VALUES('Mr musa malo','test@gmail.com','test1','instructor');

INSERT INTO users(full_name,email,password, role) VALUES('Student2','student2@gmail.com','test4', 'student');


INSERT INTO courses (title, description, instructor_id, category) VALUES
('Intro to Web Development', 'Learn HTML, CSS, and JavaScript basics.', 9, 'Web Development'),
('Database Fundamentals', 'Understand SQL and relational database design.', 10, 'Databases'),
('Advanced React', 'Build powerful front-end apps using React.js.', 2, 'Web Development');




INSERT INTO lessons (course_id, title, content, video_url, position) VALUES
(4, 'Getting Started with HTML', 'Learn the structure of web pages using HTML.', 'https://videosite.com/html1', 1),
(4, 'CSS Basics', 'Add styles and layouts with CSS.', 'https://videosite.com/css1', 2),
(4, 'Intro to JavaScript', 'Learn basic JavaScript syntax and logic.', 'https://videosite.com/js1', 3),
(5, 'What is a Database?', 'Understand what databases are and how they work.', 'https://videosite.com/db1', 1),
(5, 'SQL Basics', 'Learn how to query and modify data.', 'https://videosite.com/sql1', 2),
(6, 'React Components', 'Understand functional components and props.', 'https://videosite.com/react1', 1),
(6, 'React Hooks', 'Learn how to use useState and useEffect.', 'https://videosite.com/react2', 2);



INSERT INTO enrollments (user_id, course_id) VALUES
(3, 4),
(6, 5),
(7, 4),
(8, 6);


INSERT INTO progress (user_id, lesson_id, completed, completed_at) VALUES
(3, 8, TRUE, '2025-10-01 10:30:00'),
(6, 11, TRUE, '2025-10-02 14:00:00'),
(7, 13, FALSE, NULL),
(8, 8, TRUE, '2025-10-03 09:00:00');


INSERT INTO quizzes (course_id, title) VALUES
(4, 'Web Basics Quiz'),
(5, 'Database Intro Quiz'),
(6, 'React Fundamentals Quiz');

INSERT INTO quiz_results (quiz_id, user_id, score, taken_at) VALUES
(1, 3, 85.50, '2025-10-04 09:45:00'),
(2, 6, 90.00, '2025-10-05 11:00:00'),
(1, 7, 70.25, '2025-10-04 10:15:00'),
(3, 8, 88.75, '2025-10-06 08:40:00');




